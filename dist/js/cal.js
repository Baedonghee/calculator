function add(str,num){var display=document.getElementById("display");if("C"==str)return display.value=0,arrayOp=[],void(arrayNum=[]);if("="==str)return arrayNum.length==arrayOp.length?void alert("잘못된계산"):(count||(stacknum=arrayNum[arrayNum.length-1],stackop=arrayOpSum[arrayOpSum.length-1]),arrayOp=[],arrayNum=[],arrayOpSum=[],arrayNum.push(String(Math.floor(1e4*eval(sum))/1e4)),count&&(sum=Math.floor(1e4*eval(arrayNum[0]+stackop+stacknum))/1e4,arrayNum[0]=String(sum)),count=!0,void(display.value=commify(arrayNum[0])));if(arrayNum.length==arrayOp.length){if("trans"==str)return;"+"==str||"-"==str||"÷"==str||"×"==str?(arrayOp[arrayOp.length-1]=str,arrayOpSum[arrayOpSum.length-1]=num):"0"==str&&"0"==display.value?display.value="0":(0==display.value&&"."==str&&(str="0."),arrayNum.push(String(str)))}else arrayNum.length!=arrayOp.length&&("+"==str||"-"==str||"÷"==str||"×"==str?(arrayOp.push(str),arrayOpSum.push(num)):"trans"==str?arrayNum[arrayNum.length-1]=String(-arrayNum[arrayNum.length-1]):10==arrayNum[arrayNum.length-1].length?alert("입력범위 초과"):arrayNum[arrayNum.length-1]+=String(str));for(var i=0;i<arrayNum.length;i++)0==i?0!=arrayOp.length?(display.value=commify(arrayNum[i])+arrayOp[i],sum=arrayNum[i]+arrayOpSum[i]):(display.value=commify(arrayNum[i]),sum=arrayNum[i]):void 0==arrayOp[i]?(display.value+=commify(arrayNum[i]),sum+=arrayNum[i]):(display.value+=commify(arrayNum[i])+arrayOp[i],sum+=arrayNum[i]+arrayOpSum[i]);count=!1}function commify(a){for(var r=/(^[+-]?\d+)(\d{3})/;r.test(a);)a=a.replace(r,"$1,$2");return a}function miniButton(){document.getElementById("main").style.animation="scaleAni 2s",document.getElementById("main").style.animationFillMode="forwards",document.getElementById("miniButton").style.animation="opactityAni 4s",document.getElementById("miniButton").style.display="block",document.getElementById("miniButton").style.animationFillMode="forwards"}function onButton(){document.getElementById("main").style.animation="scaleAniBack 2s",document.getElementById("main").style.animationFillMode="forwards",document.getElementById("miniButton").style.animation="opactityAniBack 2s",document.getElementById("miniButton").style.animationFillMode="forwards"}function plusButton(){var a=document.getElementById("calculator0").cloneNode(!0);a.id="calculator"+ ++z,document.body.appendChild(a)}var sum="",count=!1,stackop="",stacknum=0,arrayNum=[],arrayOp=[],arrayOpSum=[],z=0,number="";